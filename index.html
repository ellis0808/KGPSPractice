<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <title>KGPS English Practice</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="./resources/css/styles.css"
      id="stylesheet"
    />
    <script
      type="module"
      src="./resources/login/session-check.js"
    ></script>
    <style>
      /* Initially hide the content */
      #main-content {
        display: none;
      }
    </style>
    <link
      rel="preconnect"
      href="https://fonts.googleapis.com"
    />
    <link
      rel="preconnect"
      href="https://fonts.gstatic.com"
      crossorigin
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Kdam+Thmor+Pro&family=Playpen+Sans:wght@100..800&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Noto+Serif+JP&family=Noto+Serif:ital,wght@0,100..900;1,100..900&&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <script src="./resources/utilities/howler.js"></script>
    <div
      class="navbar"
      id="navbar"
    >
      <div class="nav-logo"></div>
      <div class="nav-user-space">
        <div class="nav-user-name"></div>
        <div class="nav-user-menu dropdown">
          <ul>
            <li class="logout">Logout</li>
          </ul>
        </div>
      </div>
    </div>
    <div
      class="parents-info"
      id="parents-info"
    >
      保護者の方へ
    </div>
    <div
      class="main-container"
      id="main-container"
    >
      <div
        class="top-container"
        id="top-container"
      ></div>
      <div
        class="menu-container"
        id="menu-container"
      ></div>
    </div>
    <script
      src="https://kit.fontawesome.com/4fb586e243.js"
      crossorigin="anonymous"
    ></script>
    <!-- <script
      data-search-pseudo-elements
      defer
      src="/your-path-to-fontawesome/js/all.js"
    ></script> -->
    <script>
      document.addEventListener("DOMContentLoaded", async function () {
        try {
          const response = await fetch(
            "https://orchidpony8.sakura.ne.jp/KGPSEnglishPractice/api/session-check.php",
            {
              credentials: "include", // Ensure cookies are sent with the request
            }
          );
          const data = await response.json();

          if (data.loggedIn) {
            // Session is valid, show the content
            document.getElementById("main-content").style.display = "block";
          } else {
            // No valid session, redirect to login
            window.location.href = "/resources/login/login.html";
          }
        } catch (error) {
          console.error("Error checking session:", error);
          window.location.href = "/resources/login/error.html";
        }
      });
    </script>
    <!-- <script
      type="module"
      src="./resources/apps/index.js"
    ></script> -->
  </body>
</html>
